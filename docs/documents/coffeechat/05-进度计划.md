# 进度计划

[TOC]

## 架构设计
时间：2019.08.31 - 2019.09.11  
简介：略  
功能：
- [x] 架构设计：参考瓜子 IM
- [x] 协议设计：参考网易云 IM、环信、TeamTalk
- [x] 数据库设计
- [x] 消息分表存储设计
- [x] IM 消息 ID 生成设计

## 0.1（原型）：基本架构和基础功能

时间：2019.12.10  
简介：Demo版本，小而美，初学者建议从该版本入手学习。  
功能：
- [x] flutter 跨平台移动端
- [x] 单聊
- [x] 多媒体消息：文本
- [x] 会话列表
- [x] 消息存储
- [x] 历史消息
- [x] 漫游消息（用户切换到任何设备都可以读取到最近的历史消息）
- [x] 未读消息计数
- [x] 会话同步缓存

## 0.2 2020.11.08

- [x] 群管理
    - [x] 创建群
    - [x] 查询群列表
    - [x] 查询群详细信息

- [x] 群成员管理
    - [x] 群消息存储和广播
    - [x] 群未读计数

- [x] 群聊
    - [x] 消息存储
    - [x] 消息广播
    - [x] 未读计数
    - [x] 群历史消息查询
    - [x] 提示消息：群创建、拉人等

- [x] 用户管理
    - [x] 列表查询

## 0.3 xx

- [ ] 登录
    - [x] 界面重新设计
    - [ ] 注册

- [ ] 我的    
    - [ ] 个人信息展示
    - [ ] 昵称修改

- [ ] 群功能
    - [ ] 拉人
    - [ ] 踢人
    - [ ] 主动退出
    - [ ] 解散
    - [ ] 群公告
    - [ ] 修改群名称

## 0.2：服务器集群、性能

时间：2020.01.20  
简介：（三高：高性能高可用高并发）集群化，百万用户在线，提高服务可用性  
功能：  
```
- [ ] 性能调优（使用Kafka处理实时消息，削峰、异步处理提升吞吐量、解耦合）
- [ ] RouteServer消息路由
- [ ] 负载均衡
- [ ] 双机容灾
- [ ] 性能压测Benchmark

PS：以上这些都暂时搁置，如果引入Kafka会使系统复杂性增加，目前阶段以单机为主，提倡小而美，我们现阶段目标用户是独立开发者
```
- [ ] 安装部署脚本
- [ ] docker部署

## 0.3：更好的体验

时间：2019.11.30  
简介：增加消息推送，实现永久在线。使用消息timeline同步模型，增加消息缓存，使用更顺滑  
功能：  
- [ ] 多媒体消息：表情
- [ ] 多媒体消息：图片
- [ ] 消息推送(APNS)
- [ ] 消息推送提醒（系统通知栏消息提醒）
- [ ] 网络连接状态
- [ ] 消息同步缓存
- [ ] 头像同步缓存

## 0.4：群聊

时间：2019.11.30  
简介：姗姗来迟  
功能：  
- [ ] 群聊
- [ ] 群最高人数：200
- [ ] 群管理：群主、加人、踢人
- [ ] 群消息免打扰
- [ ] 群成员管理

## 0.5：完整功能

时间：2019.12.31  
简介：增加更多 im 通用功能，可满足大部分需求。平台保证性能、高可用，iOS 增加机型的适配、消息推送等  
功能：
- [ ] 百万用户
- [ ] 离线消息存储
- [ ] 更多多媒体消息：图片、语音、视频、位置、表情包

## 1.0：可上生产环境，为独立开发者增加周边工具

时间：2020.01.31  
简介：锦上添花  
功能：  
- [ ] 生产环境
- [ ] 集群
- [ ] 业务监控
- [ ] 数据分析
- [ ] 自动备份

## 2.0：可推广

时间：2020.06.31  
简介：享受吧  
功能：  
- [ ] electron跨平台桌面客户端
- [ ] swift/iOS客户端+SDK
- [ ] kotlin/Android客户端+SDK
- [ ] vue/Web客户端+SDK

## 3.0：特色功能
时间：2020.09.31
简介：我会遇见你吗？
功能：
- [ ] 阅后即焚
- [ ] 撤回
- [ ] 正在输入
- [ ] 已读回执（用户发送消息，获取对方是否已读状态 ）
- [ ] 多终端已读同步（同个产品多终端情况下，同步消息已读未读的状态）
- [ ] 端到端加密
- [ ] 高清语音消息
- [ ] 文件上传下载
- [ ] 语音通话
- [ ] 视频通话